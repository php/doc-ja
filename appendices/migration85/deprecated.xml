<?xml version="1.0" encoding="utf-8"?>
<sect1 xml:id="migration85.deprecated">
 <title>PHP 8.5.x で推奨されなくなる機能</title>

 <sect2 xml:id="migration85.deprecated.core">
  <title>PHP コア</title>

  <sect3 xml:id="migration85.deprecated.core.changes-to-user-output-handler">
   <title>ユーザー定義の出力ハンドラに関する変更</title>
   <!-- RFC: https://wiki.php.net/rfc/deprecations_php_8_4 -->

   <simpara>
    ユーザー定義の出力ハンドラから文字列でない値を返すことは、
    推奨されなくなりました。
    この推奨されない警告が表示されることを保証するため、
    不正な戻り値を持つハンドラはバイパスされます。
    つまり、ネストされた出力ハンドラが存在する場合、
    次のハンドラは引き続き使われるということです。
   </simpara>

   <simpara>
    ユーザー定義の出力ハンドラから(たとえば <function>echo</function>
    などを使って) 出力を行うことは、推奨されなくなりました。
    この推奨されない警告は、
    出力を生成するハンドラをバイパスして、
    それが確実に表示されるようにします。
    つまり、ネストされた出力ハンドラが存在する場合、
    次のハンドラは引き続き使われるということです。
    ユーザー定義の出力ハンドラが文字列でない値を返し、
    かつ出力を生成する場合、出力を行ったことに関する警告が最初に発生します。
   </simpara>

  </sect3>

  <sect3 xml:id="migration85.deprecated.core.non-canonical-cast-names">
   <title>正規化されていない型名でのキャスト</title>
   <!-- RFC: https://wiki.php.net/rfc/deprecations_php_8_5#deprecate_non-standard_cast_names -->

   <simpara>
    正規化されていない型名
    <literal>(boolean)</literal>,
    <literal>(integer)</literal>,
    <literal>(double)</literal>,
    <literal>(binary)</literal> でキャストすることは、
    推奨されなくなりました。
    <literal>(bool)</literal>, <literal>(int)</literal>,
    <literal>(float)</literal>, <literal>(string)</literal>
    をそれぞれ使ってください。
   </simpara>

  </sect3>

  <sect3 xml:id="migration85.deprecated.core.case-statements-with-semicolon">
   <title>セミコロンでcase文を終了させる</title>
   <!-- RFC: https://wiki.php.net/rfc/deprecations_php_8_5#deprecate_semicolon_after_case_in_switch_statement -->

   <simpara>
    case文をコロンではなく、セミコロンで終了させることは、
    推奨されなくなりました。
   </simpara>

  </sect3>

  <sect3 xml:id="migration85.deprecated.core.the-backtick-operator">
   <title>バッククォート演算子</title>
   <!-- RFC: https://wiki.php.net/rfc/deprecations_php_8_5#deprecate_backticks_as_an_alias_for_shell_exec -->

   <simpara>
    <function>shell_exec</function>
    のエイリアスとして使われている
    <link linkend="language.operators.execution">バッククォート演算子</link>
    は、推奨されなくなりました。
   </simpara>

  </sect3>

  <sect3 xml:id="migration85.deprecated.core.return-null-from-debuginfo">
   <title>__debugInfo() から null を返す</title>
   <!-- RFC: https://wiki.php.net/rfc/deprecations_php_8_5#deprecate_debuginfo_returning_null -->

   <simpara>
    <link linkend="language.oop5.magic.debuginfo">__debugInfo()</link>
    から &null; を返すことは、推奨されなくなりました。
    空の配列を返してください。
   </simpara>

  </sect3>

  <sect3 xml:id="migration85.deprecated.core.return-memleaks-ini-directive">
   <title>report_memleaks INI ディレクティブ</title>
   <!-- RFC: https://wiki.php.net/rfc/deprecations_php_8_5#deprecate_the_report_memleaks_ini_directive -->

   <simpara>
    INI ディレクティブ
    <link linkend="ini.report-memleaks">report_memleaks</link> は、
    推奨されなくなりました。
   </simpara>

  </sect3>

  <sect3 xml:id="migration85.deprecated.core.constant-redeclaration">
   <title>定数の再宣言</title>
   <!-- RFC: https://wiki.php.net/rfc/deprecations_php_8_5#deprecate_constant_redeclaration -->

   <simpara>
    同じ定数を再宣言することは、推奨されなくなりました。
   </simpara>

  </sect3>

  <sect3 xml:id="migration85.deprecated.core.closure-binding-issues">
   <title>クロージャのバインド時の問題</title>
   <!-- RFC: https://wiki.php.net/rfc/deprecations_php_8_5#deprecate_closure_binding_issues -->

   <para>
    既に <constant>E_WARNING</constant> が発生している、
    クロージャのバインド時の以下の問題は、推奨されなくなりました:

    <simplelist>
     <member>インスタンスを static なクロージャにバインドすること</member>
     <member>メソッドが定義されているクラス(またはサブクラス)のインスタンスでないオブジェクトに、メソッドをバインドすること</member>
     <member>メソッドから $this のバインドを解除すること</member>
     <member>`$this` を使っているクロージャから、$this のバインドを解除すること</member>
     <member>内部クラスのスコープにクロージャをバインドすること</member>
     <member>関数やメソッドから生成したクロージャのスコープを、再度バインドすること</member>
    </simplelist>
   </para>

  </sect3>

  <sect3 xml:id="migration85.deprecated.core.sleep-and-wakeup-magic-methods">
   <title>マジックメソッド __sleep() と __wakeup()</title>
   <!-- RFC: https://wiki.php.net/rfc/deprecations_php_8_5#deprecate_the_sleep_and_wakeup_magic_methods -->
   <!-- RFC: https://wiki.php.net/rfc/soft-deprecate-sleep-wakeup -->

   <simpara>
    マジックメソッド <link linkend="object.sleep">__sleep()</link> と
    <link linkend="object.wakeup">__wakeup()</link> は、
    soft-deprecated 扱いになりました。
    代わりに、<link linkend="object.serialize">__serialize()</link> と
    <link linkend="object.unserialize">__unserialize()</link> を使ってください。
    PHP 7 との互換性が必要な場合は、両方を同時に使ってください。
   </simpara>

  </sect3>

  <sect3 xml:id="migration85.deprecated.core.using-null-as-an-array-offset">
   <title>配列のオフセットに null を指定</title>
   <!-- RFC: https://wiki.php.net/rfc/deprecations_php_8_5#deprecate_using_values_null_as_an_array_offset_and_when_calling_array_key_exists -->

   <simpara>
    配列のオフセットに &null; を指定したり、
    <function>array_key_exists</function> をコールする際に &null; を指定することは、
    推奨されなくなりました。
    代わりに、空文字列を使ってください。
   </simpara>

  </sect3>

  <sect3 xml:id="migration85.deprecated.core.incrementing-non-numeric-strings">
   <title>数値でない文字列をインクリメント</title>
   <!-- RFC: https://wiki.php.net/rfc/deprecations_php_8_5#enact_follow-up_phase_of_the_path_to_saner_incrementdecrement_operators_rfc -->

   <simpara>
    数値でない文字列をインクリメントすることは、推奨されなくなりました。
    <function>str_increment</function> を代わりに使ってください。
   </simpara>

  </sect3>

  <sect3 xml:id="migration85.deprecated.core.register-argc-argv-directive">
   <title>register_argc_argv INI ディレクティブ</title>
   <!-- RFC: https://wiki.php.net/rfc/deprecations_php_8_5#deprecate_the_register_argc_argv_ini_directive -->

   <simpara>
    CLI でない SAPI において、
    クエリ文字列から <code>$_SERVER['argc']</code> と
    <code>$_SERVER['argv']</code> の値を取得する機能は、
    推奨されなくなりました。
    安全な使い方を検証した上で <literal>register_argc_argv=0</literal>
    を設定し、情報を取得する手段を <varname>$_GET</varname> や
    <code>$_SERVER['QUERY_STRING']</code> に切り替えてください。
   </simpara>

  </sect3>

 </sect2>

 <sect2 xml:id="migration85.deprecated.curl">
  <title>cURL</title>

  <simpara>
   <function>curl_close</function> 関数は、推奨されなくなりました。
   <classname>CurlHandle</classname> オブジェクトが、
   自動でリソースを開放するためです。
   <!-- RFC: https://wiki.php.net/rfc/deprecations_php_8_5#deprecate_curl_close -->
  </simpara>

  <simpara>
   <function>curl_share_close</function> 関数は、推奨されなくなりました。
   <classname>CurlShareHandle</classname> オブジェクトが、
   自動でリソースを開放するためです。
   <!-- RFC: https://wiki.php.net/rfc/deprecations_php_8_5#deprecate_curl_share_close -->
  </simpara>

 </sect2>

 <sect2 xml:id="migration85.deprecated.date">
  <title>Date</title>

  <simpara>
   定数 <constant>DATE_RFC7231</constant> と
   <constant>DateTimeInterface::RFC7231</constant>
   は、推奨されなくなりました。
   これらに関連付けられているタイムゾーンは無視され、
   常に GMT を使っているためです。
   <!-- RFC: https://wiki.php.net/rfc/deprecations_php_8_5#deprecate_date_rfc7231_and_datetimeinterfacerfc7231 -->
  </simpara>

  <simpara>
   <interfacename>DateTimeInterface</interfacename>,
   <classname>DateTime</classname>,
   <classname>DateTimeImmutable</classname>,
   <classname>DateTimeZone</classname>,
   <classname>DateInterval</classname>,
   <classname>DatePeriod</classname> のマジックメソッド
   <link linkend="object.wakeup">__wakeup()</link>
   は、推奨されなくなりました。
   マジックメソッド <link linkend="object.unserialize">__unserialize()</link>
   を使うのが好ましいです。
   <!-- RFC: https://wiki.php.net/rfc/deprecations_php_8_5#deprecate_the_sleep_and_wakeup_magic_methods -->
  </simpara>

 </sect2>

 <sect2 xml:id="migration85.deprecated.fileinfo">
  <title>FileInfo</title>

  <simpara>
   <function>finfo_close</function> 関数は、推奨されなくなりました。
   <classname>finfo</classname> オブジェクトが、
   自動でリソースを開放するためです。
   <!-- RFC: https://wiki.php.net/rfc/deprecations_php_8_5#deprecate_finfo_close -->
  </simpara>

  <simpara>
   <function>finfo_buffer</function> 関数の <parameter>$context</parameter>
   パラメータは、推奨されなくなりました。
   このパラメータは無視されているためです。
   <!-- RFC: https://wiki.php.net/rfc/deprecations_php_8_5#deprecate_the_context_parameter_for_finfo_buffer -->
  </simpara>

 </sect2>

 <sect2 xml:id="migration85.deprecated.gd">
  <title>GD</title>

  <simpara>
   <function>imagedestroy</function> 関数は、推奨されなくなりました。
   <classname>GdImage</classname> オブジェクトが、
   自動でリソースを開放するためです。
   <!-- RFC: https://wiki.php.net/rfc/deprecations_php_8_5#deprecate_imagedestroy -->
  </simpara>

 </sect2>

 <sect2 xml:id="migration85.deprecated.hash">
  <title>Hash</title>

  <simpara>
   <constant>MHASH_<replaceable>*</replaceable></constant> 定数は、
   推奨されなくなりました。
   mhash*() 関数が推奨されなくなった際に、
   これらの定数は見逃されていました。
   <!-- RFC: https://wiki.php.net/rfc/deprecations_php_8_1#mhash_function_family -->
  </simpara>

 </sect2>

 <sect2 xml:id="migration85.deprecated.intl">
  <title>Intl</title>

  <simpara>
   INI ディレクティブ
   <link linkend="ini.intl.error-level">intl.error_level</link> は、
   推奨されなくなりました。
   エラーは手動でチェックするか、
   INI ディレクティブ
   <link linkend="ini.intl.use-exceptions">intl.use_exceptions</link>
   を使って例外を有効にすべきです。
   <!-- RFC: https://wiki.php.net/rfc/deprecations_php_8_5#deprecate_intlerror_level_ini_setting -->
  </simpara>

 </sect2>

 <sect2 xml:id="migration85.deprecated.ldap">
  <title>LDAP</title>

  <para>
   特定の Oracle Instant Client の呼び出しや定数は、
   推奨されなくなりました。

   影響を受ける呼び出しは以下の通りです:
   <simplelist>
    <member>wallet のサポートを使った <function>ldap_connect</function></member>
    <member><function>ldap_connect_wallet</function></member>
   </simplelist>

   影響を受ける定数は以下の通りです:
   <simplelist>
    <member><constant>GSLC_SSL_NO_UATH</constant></member>
    <member><constant>GSLC_SSL_ONEWAY_UATH</constant></member>
    <member><constant>GSLC_SSL_TWOWAY_UATH</constant></member>
   </simplelist>
   <!-- RFC: https://wiki.php.net/rfc/deprecations_php_8_5#deprecate_building_ext_ldap_against_oracle_ldap -->
  </para>

 </sect2>

 <sect2 xml:id="migration85.deprecated.mysqli">
  <title>MySQLi</title>

  <simpara>
   エイリアスとして定義されている
   <function>mysqli_execute</function> 関数は、
   推奨されなくなりました。
   代わりに <function>mysqli_stmt_execute</function> を使いましょう。
   <!-- RFC: https://wiki.php.net/rfc/deprecations_php_8_5#formally_deprecate_mysqli_execute -->
  </simpara>

 </sect2>

 <sect2 xml:id="migration85.deprecated.openssl">
  <title>OpenSSL</title>

  <simpara>
   <function>openssl_pkey_derive</function> の <parameter>$key_length</parameter>
   パラメータは、推奨されなくなりました。
   このパラメータは無視されているか、キーを切り捨てるかしており、
   それらの挙動が脆弱性になりうるためです。
   <!-- RFC: https://wiki.php.net/rfc/deprecations_php_8_5#deprecate_key_length_parameter_of_openssl_pkey_derive -->
  </simpara>

 </sect2>

 <sect2 xml:id="migration85.deprecated.pdo">
  <title>PDO</title>

  <simpara>
   "uri:" DSN スキームは、推奨されなくなりました。
   リモートURI から生じる、DSN に関するセキュリティ上の懸念があるためです。
   <!-- RFC: https://wiki.php.net/rfc/deprecations_php_8_5#deprecate_pdo_s_urischeme -->
  </simpara>

  <para>
   PDO クラスのドライバ特有の定数は、推奨されなくなりました。
   影響を受ける定数と、代替は以下のとおりです:

   <simplelist>
    <member><constant>PDO::DBLIB_ATTR_CONNECTION_TIMEOUT</constant> => <constant>Pdo\Dblib::ATTR_CONNECTION_TIMEOUT</constant></member>
    <member><constant>PDO::DBLIB_ATTR_QUERY_TIMEOUT</constant> => <constant>Pdo\Dblib::ATTR_QUERY_TIMEOUT</constant></member>
    <member><constant>PDO::DBLIB_ATTR_STRINGIFY_UNIQUEIDENTIFIER</constant> => <constant>Pdo\Dblib::ATTR_STRINGIFY_UNIQUEIDENTIFIER</constant></member>
    <member><constant>PDO::DBLIB_ATTR_VERSION</constant> => <constant>Pdo\Dblib::ATTR_VERSION</constant></member>
    <member><constant>PDO::DBLIB_ATTR_TDS_VERSION</constant> => <constant>Pdo\Dblib::ATTR_TDS_VERSION</constant></member>
    <member><constant>PDO::DBLIB_ATTR_SKIP_EMPTY_ROWSETS</constant> => <constant>Pdo\Dblib::ATTR_SKIP_EMPTY_ROWSETS</constant></member>
    <member><constant>PDO::DBLIB_ATTR_DATETIME_CONVERT</constant> => <constant>Pdo\Dblib::ATTR_DATETIME_CONVERT</constant></member>
    <member><constant>PDO::FB_ATTR_DATE_FORMAT</constant> => <constant>Pdo\Firebird::ATTR_DATE_FORMAT</constant></member>
    <member><constant>PDO::FB_ATTR_TIME_FORMAT</constant> => <constant>Pdo\Firebird::ATTR_TIME_FORMAT</constant></member>
    <member><constant>PDO::FB_ATTR_TIMESTAMP_FORMAT</constant> => <constant>Pdo\Firebird::ATTR_TIMESTAMP_FORMAT</constant></member>
    <member><constant>PDO::MYSQL_ATTR_USE_BUFFERED_QUERY</constant> => <constant>Pdo\Mysql::ATTR_USE_BUFFERED_QUERY</constant></member>
    <member><constant>PDO::MYSQL_ATTR_LOCAL_INFILE</constant> => <constant>Pdo\Mysql::ATTR_LOCAL_INFILE</constant></member>
    <member><constant>PDO::MYSQL_ATTR_LOCAL_INFILE_DIRECTORY</constant> => <constant>Pdo\Mysql::ATTR_LOCAL_INFILE_DIRECTORY</constant></member>
    <member><constant>PDO::MYSQL_ATTR_INIT_COMMAND</constant> => <constant>Pdo\Mysql::ATTR_INIT_COMMAND</constant></member>
    <member><constant>PDO::MYSQL_ATTR_MAX_BUFFER_SIZE</constant> => <constant>Pdo\Mysql::ATTR_MAX_BUFFER_SIZE</constant></member>
    <member><constant>PDO::MYSQL_ATTR_READ_DEFAULT_FILE</constant> => <constant>Pdo\Mysql::ATTR_READ_DEFAULT_FILE</constant></member>
    <member><constant>PDO::MYSQL_ATTR_READ_DEFAULT_GROUP</constant> => <constant>Pdo\Mysql::ATTR_READ_DEFAULT_GROUP</constant></member>
    <member><constant>PDO::MYSQL_ATTR_COMPRESS</constant> => <constant>Pdo\Mysql::ATTR_COMPRESS</constant></member>
    <member><constant>PDO::MYSQL_ATTR_DIRECT_QUERY</constant> => <constant>Pdo\Mysql::ATTR_DIRECT_QUERY</constant></member>
    <member><constant>PDO::MYSQL_ATTR_FOUND_ROWS</constant> => <constant>Pdo\Mysql::ATTR_FOUND_ROWS</constant></member>
    <member><constant>PDO::MYSQL_ATTR_IGNORE_SPACE</constant> => <constant>Pdo\Mysql::ATTR_IGNORE_SPACE</constant></member>
    <member><constant>PDO::MYSQL_ATTR_SSL_KEY</constant> => <constant>Pdo\Mysql::ATTR_SSL_KEY</constant></member>
    <member><constant>PDO::MYSQL_ATTR_SSL_CERT</constant> => <constant>Pdo\Mysql::ATTR_SSL_CERT</constant></member>
    <member><constant>PDO::MYSQL_ATTR_SSL_CA</constant> => <constant>Pdo\Mysql::ATTR_SSL_CA</constant></member>
    <member><constant>PDO::MYSQL_ATTR_SSL_CAPATH</constant> => <constant>Pdo\Mysql::ATTR_SSL_CAPATH</constant></member>
    <member><constant>PDO::MYSQL_ATTR_SSL_CIPHER</constant> => <constant>Pdo\Mysql::ATTR_SSL_CIPHER</constant></member>
    <member><constant>PDO::MYSQL_ATTR_SSL_VERIFY_SERVER_CERT</constant> => <constant>Pdo\Mysql::ATTR_SSL_VERIFY_SERVER_CERT</constant></member>
    <member><constant>PDO::MYSQL_ATTR_SERVER_PUBLIC_KEY</constant> => <constant>Pdo\Mysql::ATTR_SERVER_PUBLIC_KEY</constant></member>
    <member><constant>PDO::MYSQL_ATTR_MULTI_STATEMENTS</constant> => <constant>Pdo\Mysql::ATTR_MULTI_STATEMENTS</constant></member>
    <member><constant>PDO::ODBC_ATTR_USE_CURSOR_LIBRARY</constant> => <constant>Pdo\Odbc::ATTR_USE_CURSOR_LIBRARY</constant></member>
    <member><constant>PDO::ODBC_ATTR_ASSUME_UTF8</constant> => <constant>Pdo\Odbc::ATTR_ASSUME_UTF8</constant></member>
    <member><constant>PDO::ODBC_SQL_USE_IF_NEEDED</constant> => <constant>Pdo\Odbc::SQL_USE_IF_NEEDED</constant></member>
    <member><constant>PDO::ODBC_SQL_USE_DRIVER</constant> => <constant>Pdo\Odbc::SQL_USE_DRIVER</constant></member>
    <member><constant>PDO::ODBC_SQL_USE_ODBC</constant> => <constant>Pdo\Odbc::SQL_USE_ODBC</constant></member>
    <member><constant>PDO::PGSQL_ATTR_DISABLE_PREPARES</constant> => <constant>Pdo\Pgsql::ATTR_DISABLE_PREPARES</constant></member>
    <member><constant>PDO::SQLITE_ATTR_EXTENDED_RESULT_CODES</constant> => <constant>Pdo\Sqlite::ATTR_EXTENDED_RESULT_CODES</constant></member>
    <member><constant>PDO::SQLITE_ATTR_OPEN_FLAGS</constant> => <constant>Pdo\Sqlite::OPEN_FLAGS</constant></member>
    <member><constant>PDO::SQLITE_ATTR_READONLY_STATEMENT</constant> => <constant>Pdo\Sqlite::ATTR_READONLY_STATEMENT</constant></member>
    <member><constant>PDO::SQLITE_DETERMINISTIC</constant> => <constant>Pdo\Sqlite::DETERMINISTIC</constant></member>
    <member><constant>PDO::SQLITE_OPEN_READONLY</constant> => <constant>Pdo\Sqlite::OPEN_READONLY</constant></member>
    <member><constant>PDO::SQLITE_OPEN_READWRITE</constant> => <constant>Pdo\Sqlite::OPEN_READWRITE</constant></member>
    <member><constant>PDO::SQLITE_OPEN_CREATE</constant> => <constant>Pdo\Sqlite::OPEN_CREATE</constant></member>
   </simplelist>
   <!-- RFC: https://wiki.php.net/rfc/deprecations_php_8_5#deprecate_building_ext_ldap_against_oracle_ldap -->
  </para>

  <para>
   PDO クラスのドライバ特有のメソッドは、推奨されなくなりました。
   影響を受けるメソッドと、代替は以下のとおりです:

   <simplelist>
    <member><methodname>PDO::pgsqlCopyFromArray</methodname> => <methodname>Pdo\Pgsql::copyFromArray</methodname></member>
    <member><methodname>PDO::pgsqlCopyFromFile</methodname> => <methodname>Pdo\Pgsql::copyFromFile</methodname></member>
    <member><methodname>PDO::pgsqlCopyToArray</methodname> => <methodname>Pdo\Pgsql::copyToArray</methodname></member>
    <member><methodname>PDO::pgsqlCopyToFile</methodname> => <methodname>Pdo\Pgsql::copyToFile</methodname></member>
    <member><methodname>PDO::pgsqlGetNotify</methodname> => <methodname>Pdo\Pgsql::getNotify</methodname></member>
    <member><methodname>PDO::pgsqlGetPid</methodname> => <methodname>Pdo\Pgsql::getPid</methodname></member>
    <member><methodname>PDO::pgsqlLOBCreate</methodname> => <methodname>Pdo\Pgsql::lobCreate</methodname></member>
    <member><methodname>PDO::pgsqlLOBOpen</methodname> => <methodname>Pdo\Pgsql::lobOpen</methodname></member>
    <member><methodname>PDO::pgsqlLOBUnlink</methodname> => <methodname>Pdo\Pgsql::lobUnlink</methodname></member>
    <member><methodname>PDO::sqliteCreateAggregate</methodname> => <methodname>Pdo\Sqlite::createAggregate</methodname></member>
    <member><methodname>PDO::sqliteCreateCollation</methodname> => <methodname>Pdo\Sqlite::createCollation</methodname></member>
    <member><methodname>PDO::sqliteCreateFunction</methodname> => <methodname>Pdo\Sqlite::createFunction</methodname></member>
   </simplelist>
   <!-- RFC: https://wiki.php.net/rfc/deprecations_php_8_5#deprecate_driver_specific_pdo_constants_and_methods -->
  </para>

 </sect2>

 <sect2 xml:id="migration85.deprecated.pdo-pgsql">
  <title>PDO_PGSQL</title>

  <para>
   トランザクションの状態に関連する以下の定数は、推奨されなくなりました:

   <simplelist>
    <member><constant>PDO::PGSQL_TRANSACTION_IDLE</constant></member>
    <member><constant>PDO::PGSQL_TRANSACTION_ACTIVE</constant></member>
    <member><constant>PDO::PGSQL_TRANSACTION_INTRANS</constant></member>
    <member><constant>PDO::PGSQL_TRANSACTION_INERROR</constant></member>
    <member><constant>PDO::PGSQL_TRANSACTION_UNKNOWN</constant></member>
   </simplelist>
   <!-- RFC: https://wiki.php.net/rfc/deprecations_php_8_5#extpdo_deprecations -->
  </para>

 </sect2>

 <sect2 xml:id="migration85.deprecated.reflection">
  <title>Reflection</title>

  <simpara>
   リフレクション関連の様々な setAccessible() メソッドは、
   推奨されなくなりました。
   使っても効果がないためです。
   <!-- RFC: https://wiki.php.net/rfc/deprecations_php_8_5#deprecate_reflectionsetaccessible -->
  </simpara>

  <simpara>
   存在しない定数に対して、
   <methodname>ReflectionClass::getConstant</methodname> 
   をコールすることは、推奨されなくなりました。
   <!-- RFC: https://wiki.php.net/rfc/deprecations_php_8_5#deprecate_reflectionclassgetconstant_for_missing_constants -->
  </simpara>

  <simpara>
   デフォルト値が存在しないプロパティに対して、
   <methodname>ReflectionProperty::getDefaultValue</methodname>
   をコールすることは、推奨されなくなりました。
   <!-- RFC: https://wiki.php.net/rfc/deprecations_php_8_5#deprecate_reflectionpropertygetdefaultvalue_for_properties_without_default_values -->
  </simpara>

 </sect2>

 <sect2 xml:id="migration85.deprecated.spl">
  <title>SPL</title>

  <simpara>
   <function>spl_autoload_call</function> を
   <function>spl_autoload_unregister</function>
   のコールバック引数に渡すことで、
   すべての autoload の登録を解除することは、推奨されなくなりました。
   代わりに、<function>spl_autoload_functions</function>
   の戻り値を反復処理し、
   それぞれの値に対して <function>spl_autoload_unregister</function> 
   をコールする必要があります。
   <!-- RFC: https://wiki.php.net/rfc/deprecations_php_8_5#deprecate_passing_spl_autoload_call_to_spl_autoload_unregister -->
  </simpara>

  <simpara>
   <methodname>SplObjectStorage::contains</methodname>,
   <methodname>SplObjectStorage::attach</methodname>,
   <methodname>SplObjectStorage::detach</methodname>
   は、推奨されなくなりました。
   <methodname>SplObjectStorage::offsetExists</methodname>,
   <methodname>SplObjectStorage::offsetSet</methodname>,
   <methodname>SplObjectStorage::offsetUnset</methodname>
   をそれぞれ使ってください。
   <!-- RFC: https://wiki.php.net/rfc/deprecations_php_8_5#deprecate_splobjectstoragecontains_splobjectstorageattach_and_splobjectstoragedetach -->
  </simpara>

  <simpara>
   オブジェクトと一緒に
   <classname>ArrayObject</classname> と
   <classname>ArrayIterator</classname> を使うことは、
   推奨されなくなりました。
   <!-- RFC: https://wiki.php.net/rfc/deprecations_php_8_5#deprecate_arrayobject_and_arrayiterator_with_objects -->
  </simpara>

 </sect2>

 <sect2 xml:id="migration85.deprecated.standard">
  <title>Standard</title>

  <simpara>
   エイリアスとして定義されている
   <function>socket_set_timeout</function> 関数は、
   推奨されなくなりました。
   代わりに <function>stream_set_timeout</function> を使いましょう。
   <!-- RFC: https://wiki.php.net/rfc/deprecations_php_8_5#formally_deprecate_socket_set_timeout -->
  </simpara>

  <simpara>
   最後にオープンしたディレクトリを使う目的で、
   <function>readdir</function>,
   <function>rewinddir</function>,
   <function>closedir</function> に &null; を渡すことは、
   推奨されなくなりました。
   最後にオープンしたディレクトリを明示的に指定してください。
   <!-- RFC: https://wiki.php.net/rfc/deprecations_php_8_5#deprecate_passing_null_to_readdir_rewinddir_and_closedir -->
  </simpara>

  <simpara>
   <function>chr</function> に、
   区間 [0, 255] の範囲にない数値を指定することは、推奨されなくなりました。
   1バイトのデータは、この範囲でのみ保持できるからです。
   <!-- RFC: https://wiki.php.net/rfc/deprecations_php_8_5#deprecate_passing_integers_outside_the_interval_0_255_to_chr -->
  </simpara>

  <simpara>
   シングルバイトでない文字列を <function>ord</function> に渡すことは、
   推奨されなくなりました。
   こうすることは、バグであることを示唆しています。
   <!-- RFC: https://wiki.php.net/rfc/deprecations_php_8_5#deprecate_passing_string_which_are_not_one_byte_long_to_ord -->
  </simpara>

  <simpara>
   ローカルで事前に定義済みの変数
   <link linkend="reserved.variables.httpresponseheader">$http_response_header</link>
   は、推奨されなくなりました。代わりに、
   <function>http_get_last_response_headers</function> をコールすべきです。
   <!-- RFC: https://wiki.php.net/rfc/deprecations_php_8_5#deprecate_the_http_response_header_predefined_variable -->
  </simpara>

 </sect2>

 <sect2 xml:id="migration85.deprecated.xml">
  <title>XML</title>

  <simpara>
   <function>xml_parser_free</function> 関数は、推奨されなくなりました。
   <classname>XMLParser</classname> オブジェクトが、
   自動でリソースを開放するためです。
   <!-- RFC: https://wiki.php.net/rfc/deprecations_php_8_5#deprecate_xml_parser_free -->
  </simpara>

 </sect2>

</sect1>
<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"~/.phpdoc/manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
vim600: syn=xml fen fdm=syntax fdl=2 si
vim: et tw=78 syn=sgml
vi: ts=1 sw=1
-->
