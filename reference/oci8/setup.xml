<?xml version="1.0" encoding="utf-8"?>
<!-- $Revision$ -->
<!-- EN-Revision: af4410a7e15898c3dbe83d6ea38246745ed9c6fb Maintainer: takagi Status: ready -->
<!-- CREDITS: hirokawa,shimooka -->

<chapter xml:id="oci8.setup" xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">
 &reftitle.setup;

 <!-- {{{ Requirements -->
 <section xml:id="oci8.requirements">
  &reftitle.required;
  <para>
   この拡張を使用するために Oracle クライアントライブラリが必要になります。
   Windows ユーザは <filename>php_oci8.dll</filename> を使用するために
   少なくともバージョン 10 以降のライブラリが必要になるでしょう。
  </para>
  <note>
   <para>
    この拡張モジュールは、Oracle 8 のクライアントライブラリをサポートしません。
    とはいえ、バージョン 9 以降のクライアントライブラリが
    Oracle 8 サーバへの接続をサポートする限りは
    Oracle 8 サーバに接続することが可能です。
   </para>
  </note>
  <para>
   要求される全てのファイルをインストールする最も簡便な方法は、
   Oracle Instant Client を使用することです。これは
   <link xlink:href="&url.oracle.instant.client;">&url.oracle.instant.client;</link>
   から取得可能です。
   OCI8 モジュールを動作させるには、Oracle Instant Client の
   「基本 (basic)」バージョンを導入するだけで十分です。
   Instant Client は ORACLE_SID もしくは ORACLE_HOME
   環境変数を設定する必要がありませんが、LD_LIBRARY_PATH と
   NLS_LANG を設定する必要があります。
  </para>
  <para>
   この拡張モジュールを使用する前に Web デーモンのユーザでもある
   Oracle ユーザに対する Oracle 用環境変数が正しく設定されていることを
   確認してください。これらの変数は Web サーバを起動する
   <emphasis>前に</emphasis> 設定されていなければなりません。
   設定されている必要がある変数を以下に示します。
   <itemizedlist>
    <listitem>
     <simpara>
      ORACLE_HOME
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      ORACLE_SID
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      LD_PRELOAD
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      LD_LIBRARY_PATH
     </simpara>
    </listitem>
    <listitem>
     <simpara>
      NLS_LANG
     </simpara>
    </listitem>
   </itemizedlist>
    頻繁にはないですが、TNS_ADMIN, TWO_TASK, ORA_TZFILE、
    そして ORA_NLS33, ORA_NLS10 あるいは
    NLS_* のような様々な Oracle の国際化設定用の変数を使用する場合は、
    Oracle のドキュメントを参照してください。
  </para>
  <para>
   Web サーバーのユーザ用に環境変数を設定した後、Web サーバーのユーザ
   (nobody, www) をグループ oracle に追加してください。
  </para>
  <note>
   <title>Web サーバが起動しないか、起動時にクラッシュする場合</title>
   <para>
    Apache が pthread ライブラリにリンクされているかどうか
    次のように確認してください。
   </para>
   <para>
    <informalexample>
     <screen>
<![CDATA[
# ldd /www/apache/bin/httpd
   libpthread.so.0 => /lib/libpthread.so.0 (0x4001c000)
   libm.so.6 => /lib/libm.so.6 (0x4002f000)
   libcrypt.so.1 => /lib/libcrypt.so.1 (0x4004c000)
   libdl.so.2 => /lib/libdl.so.2 (0x4007a000)
   libc.so.6 => /lib/libc.so.6 (0x4007e000)
   /lib/ld-linux.so.2 => /lib/ld-linux.so.2 (0x40000000)
]]>
     </screen>
    </informalexample>
   </para>
   <para>
    libpthread がこの一覧にない場合、Apache
    を再インストールする必要があります。
   </para>
   <para>
    <informalexample>
     <screen>
<![CDATA[
# cd /usr/src/apache_1.3.xx
# make clean
# LIBS=-lpthread ./config.status
# make
# make install
]]>
     </screen>
    </informalexample>
   </para>
   <para>
    UnixWare のようないくつかのシステムでは、libpthread の代わりに
    libthread が使用されています。その場合、PHP と Apache は、
    EXTRA_LIBS=-lthread を configure に指定する必要があります。
   </para>
  </note>
 </section>
 <!-- }}} -->

 <!-- {{{ Installation -->
 <section xml:id="oci8.installation">
  &reftitle.install;
  &no.install;
 </section>
 <!-- }}} -->

 <!-- {{{ Configuration -->
 &reference.oci8.ini;
 <!-- }}} -->

 <!-- {{{ Resources -->
 <section xml:id="oci8.resources">
  &reftitle.resources;
  &no.resource;
 </section>
 <!-- }}} -->

</chapter>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
indent-tabs-mode:nil
sgml-parent-document:nil
sgml-default-dtd-file:"~/.phpdoc/manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
vim600: syn=xml fen fdm=syntax fdl=2 si
vim: et tw=78 syn=sgml
vi: ts=1 sw=1
-->

