<?xml version="1.0" encoding="utf-8"?>
<!-- $Revision$ -->
<!-- EN-Revision: 8f1beeca1167fcf13cdae37d523cef0ccd12d7e6 Maintainer: takagi Status: working -->

<refentry xml:id="mongodb.createcollection" xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink">
 <refnamediv>
  <refname>MongoDB::createCollection</refname>
  <refpurpose>コレクションを作成する</refpurpose>
 </refnamediv>
 <refsect1 role="description">
  &reftitle.description;
  <methodsynopsis>
   <modifier>public</modifier> <type>MongoCollection</type><methodname>MongoDB::createCollection</methodname>
   <methodparam><type>string</type><parameter>name</parameter></methodparam>
   <methodparam choice="opt"><type>bool</type><parameter>capped</parameter><initializer>&false;</initializer></methodparam>
   <methodparam choice="opt"><type>int</type><parameter>size</parameter><initializer>0</initializer></methodparam>
   <methodparam choice="opt"><type>int</type><parameter>max</parameter><initializer>0</initializer></methodparam>
  </methodsynopsis>
  <para>
   This method is used to create capped collections and other collections 
   requiring special options.  It is identical to running:
   <programlisting role="php">
<![CDATA[
<?php

$collection = $db->command(array("create" => $name, "size" => $size, "capped" => $capped, "max" => $max));

?>
]]>
   </programlisting>
   See <function>MongoDB::command</function> for more information about database commands.
  </para>
 </refsect1>
 <refsect1 role="parameters">
  &reftitle.parameters;    
  <para>
   <variablelist>
    <varlistentry>
     <term>
      <parameter>name</parameter>
     </term>
     <listitem>
      <para>
       コレクションの名前。
      </para>
     </listitem>
    </varlistentry>   
    <varlistentry>
     <term>
      <parameter>capped</parameter>
     </term>
     <listitem>
      <para>
       コレクションが固定サイズかどうか。
      </para>
     </listitem>
    </varlistentry>   
    <varlistentry>
     <term>
      <parameter>size</parameter>
     </term>
     <listitem>
      <para>
       コレクションが固定サイズの場合にそのバイト数を指定します。
      </para>
     </listitem>
    </varlistentry>   
    <varlistentry>
     <term>
      <parameter>max</parameter>
     </term>
     <listitem>
      <para>
       コレクションが固定サイズのばあいに、コレクション内に格納できる要素の最大数。
      </para>
     </listitem>
    </varlistentry>   
   </variablelist>
  </para>
 </refsect1>
 <refsect1 role="returnvalues">
  &reftitle.returnvalues;
  <para>
   新しいコレクションをあらわすコレクションオブジェクトを返します。
  </para>
 </refsect1>
 <refsect1 role="examples">
  &reftitle.examples;
  <example>
   <title><function>MongoDB::createCollection</function> capped collection example</title>
   <para>
    A capped collection is a special type of collection that has either a fixed
    or a fixed number of elements. Once the collection is "full," the oldest
    elements will be removed when new elements are added.  Capped collections
    can be very useful for applications like logging, where you may want to
    reserve a certain amount of space for logs and not worry about them
    getting too big.
   </para>
   <para>
    This example creates a very tiny log collection that will keep a maximum of
    10 documents.
   </para>
   <programlisting role="php">
<![CDATA[
<?php

$log = $db->createCollection("logger", true, 10*1024, 10); 

for ($i = 0; $i < 100; $i++) {
    $log->insert(array("level" => WARN, "msg" => "sample log message #$i", "ts" => new MongoDate()));
}

$msgs = $log->find();

foreach ($msgs as $msg) {
    echo $msg['msg']."\n";
}

?>
]]>
   </programlisting>
   &example.outputs.similar;
   <screen>
sample log message #90
sample log message #91
sample log message #92
sample log message #93
sample log message #94
sample log message #95
sample log message #96
sample log message #97
sample log message #98
sample log message #99
   </screen>
  </example>
 </refsect1>
</refentry>
<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
sgml-parent-document:nil
sgml-default-dtd-file:"~/.phpdoc/manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
vim600: syn=xml fen fdm=syntax fdl=2 si
vim: et tw=78 syn=sgml
vi: ts=1 sw=1
--> 
