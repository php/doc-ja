  <reference id="ref.image">
  <title>イメージ関数</title>
  <titleabbrev>グラフィックス</titleabbrev>

  <partintro>
   <simpara>
    PHPのイメージ関数により<acronym>JPEG</acronym>、<acronym>GIF</acronym>、
    <acronym>PNG</acronym>画像の大きさを知ることができます。
    また、<acronym>GD</acronym>ライブラリ( <ulink url="&url.gd;">&url.gd;
    </ulink>で取得可能)があれば、画像の作成と操作を行なうこともできます。
   </simpara>
  </partintro>

  <refentry id="function.getimagesize">
   <refnamediv>
    <refname>GetImageSize</refname>
    <refpurpose>JPEG、GIF、PNG画像の大きさを取得する</refpurpose>    
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>array <function>getimagesize</function></funcdef>
     <paramdef>string <parameter>filename</parameter></paramdef>
     <paramdef>array 
      <parameter><optional>imageinfo</optional></parameter>
     </paramdef>
    </funcsynopsis>
    <para>
     <function>GetImageSize</function>関数は、任意の
	 <acronym>GIF</acronym>、<acronym>JPG</acronym>もしくは
     <acronym>PNG</acronym>ファイルの大きさを定義し、
     ファイルの型と <acronym>HTML</acronym><sgmltag>IMG</sgmltag>
     タグ中で通常使用される高さと幅からなる寸法を表す文字列を返します。
    </para>
    <para>
     返り値は、4つの要素からなる配列です。0番目の要素は、ピクセル単位
     での画像の幅です。1番目の要素は高さです。2番目の要素は画像の種類を
     示すフラグです。1ならGIF、2ならJPGそして3ならPNGです。
     3番目の要素はIMGタグで直接利用できる文字列 "height=xxx width=xxx"
     です。
     <example>
      <title>GetImageSize</title>
      <programlisting role="php">
&lt;?php $size = GetImageSize ("img/flag.jpg"); ?>
&lt;IMG SRC="img/flag.jpg" &lt;?php echo $size[3]; ?>>
      </programlisting>
     </example>
    </para>

    <para>
     オプションの <parameter>imageinfo</parameter> パラメータにより
     画像ファイルから何らかの拡張情報を引き出すことが可能です。
     現在、この変数には<acronym>JPG</acronym>ファイルについて
     異なった複数のAPPマーカーが連想配列として返されます。いくつかのプログラムは、
     これらのAPPマーカーを画像の中の埋込テキストの情報として使用します。
     最も一般的な例は、マーカーAPPl3に埋込<acronym>IPTC</acronym>  
     <ulink url="&url.iptc;">&url.iptc;</ulink>情報が返されることです。
     バイナリ形式のマーカーAPP13を読むことができるよう処理するために
     <function>iptcparse</function> 関数を使用することができます。
     <example>
       <title>IPTC を返す GetImageSize</title>
      <programlisting>
 &lt;?php 
     $size = GetImageSize ("testimg.jpg",&$info);
     if (isset ($info["APP13"])) {
         $iptc = iptcparse ($info["APP13"]);
         var_dump ($iptc);
     }
 ?>
      </programlisting>
     </example>
     <note>
      <simpara>
       この関数は、GD画像ライブラリを必要としません。
      </simpara>
     </note>
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.imagearc">
   <refnamediv>
    <refname>ImageArc</refname>
    <refpurpose>部分楕円の描画</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>int <function>imagearc</function></funcdef>
     <paramdef>int <parameter>im</parameter></paramdef>
     <paramdef>int <parameter>cx</parameter></paramdef>
     <paramdef>int <parameter>cy</parameter></paramdef>
     <paramdef>int <parameter>w</parameter></paramdef>
     <paramdef>int <parameter>h</parameter></paramdef>
     <paramdef>int <parameter>s</parameter></paramdef>
     <paramdef>int <parameter>e</parameter></paramdef>
     <paramdef>int <parameter>col</parameter></paramdef>
    </funcsynopsis>
    <para>
     <function>ImageArc</function>は、imで示す画像上に<parameter>cx</parameter>、
     <parameter>cy</parameter>を中心(左上が0,0)とする部分楕円を描画します。
     <parameter>w</parameter>と<parameter>h</parameter>はそれぞれ楕円の幅と
     高さを指定します。一方、始点と終点は引数<parameter>s</parameter>と
     <parameter>e</parameter>により度(deg)で指定します。
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.imagechar">
   <refnamediv>
    <refname>ImageChar</refname>
    <refpurpose>水平に文字を描画</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>int <function>imagechar</function></funcdef>
     <paramdef>int <parameter>im</parameter></paramdef>
     <paramdef>int <parameter>font</parameter></paramdef>
     <paramdef>int <parameter>x</parameter></paramdef>
     <paramdef>int <parameter>y</parameter></paramdef>
     <paramdef>string <parameter>c</parameter></paramdef>
     <paramdef>int <parameter>col</parameter></paramdef>
    </funcsynopsis>
    <para>
     <function>ImageChar</function>は、画像<parameter>im</parameter>上の
     座標<parameter>x</parameter>,<parameter>y</parameter>(左上が0,0) に
     <parameter>col</parameter>色で<parameter>c</parameter>の最初の文字を描画します。
     font が、1, 2, 3, 4 , 5 の場合は組込みフォントが使用されます。
     (より大きな数字はより大きなフォントに対応します)
    </para>
    <para>
     <function>imageloadfont</function>も参考にしてください。
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.imagecharup">
   <refnamediv>
    <refname>ImageCharUp</refname>
    <refpurpose>垂直に文字を描画</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>int <function>imagecharup</function></funcdef>
     <paramdef>int <parameter>im</parameter></paramdef>
     <paramdef>int <parameter>font</parameter></paramdef>
     <paramdef>int <parameter>x</parameter></paramdef>
     <paramdef>int <parameter>y</parameter></paramdef>
     <paramdef>string <parameter>c</parameter></paramdef>
     <paramdef>int <parameter>col</parameter></paramdef>
    </funcsynopsis>
    <para>
     <function>ImageCharUp</function>は、画像<parameter>im</parameter>
     の座標(<parameter>x</parameter>,<parameter>y</parameter>)(左上が0,0)から
     <parameter>col</parameter>色で
     <parameter>c</parameter>の最初の文字を垂直に描画します。
     fontが 1, 2, 3, 4 , 5の場合は、組込みフォントが使用されます。
    </para>
    <para> 
     <function>imageloadfont</function>も参考にしてください。
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.imagecolorallocate">
   <refnamediv>
    <refname>ImageColorAllocate</refname>
    <refpurpose>画像で使用する色を作成する</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>int <function>imagecolorallocate</function></funcdef>
     <paramdef>int <parameter>im</parameter></paramdef>
     <paramdef>int <parameter>red</parameter></paramdef>
     <paramdef>int <parameter>green</parameter></paramdef>
     <paramdef>int <parameter>blue</parameter></paramdef>
    </funcsynopsis>
     <para>
      <function>ImageColorAllocate</function>は、指定した<acronym>RGB</acronym>
      を配色とする色の色IDを返します。
      引数<parameter>im</parameter>は<function>imagecreate</function>関数から
      返されたものです。
      <function>ImageColorAllocate</function>は<parameter>im</parameter>で表される
      画像上で使用される各々の色を作成する際にコールする必要があります。
     <informalexample>
      <programlisting role="php">
$white = ImageColorAllocate ($im, 255, 255, 255);
$black = ImageColorAllocate ($im, 0, 0, 0);
      </programlisting>
     </informalexample>
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.imagecolorat">
   <refnamediv>
    <refname>ImageColorAt</refname>
    <refpurpose>ピクセルの色のインデックスを取得</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>int <function>imagecolorat</function></funcdef>
     <paramdef>int <parameter>im</parameter></paramdef>
     <paramdef>int <parameter>x</parameter></paramdef>
     <paramdef>int <parameter>y</parameter></paramdef>
    </funcsynopsis>
    <para>
     画像上の特定位置にあるピクセルの色のインデックスを返します。
    </para>
    <para>
     <function>imagecolorset</function>および
     <function>imagecolorsforindex</function>も参考にしてください。
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.imagecolorclosest">
   <refnamediv>
    <refname>ImageColorClosest</refname>
    <refpurpose>
     指定した色に最も近い色のインデックスを取得する
    </refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>int <function>imagecolorclosest</function></funcdef>
     <paramdef>int <parameter>im</parameter></paramdef>
     <paramdef>int <parameter>red</parameter></paramdef>
     <paramdef>int <parameter>green</parameter></paramdef>
     <paramdef>int <parameter>blue</parameter></paramdef>
    </funcsynopsis>
    <para>
     指定した<acronym>RGB</acronym>値に「近い」画像パレット中の色のインデックス
     が返されます。
    </para>
    <para>
     指定した色とパレット上の各色の「距離」は、
     <acronym>RGB</acronym>値が3次元空間上の点の座標を表すと考えて計算します。
    </para>
    <para>
     <function>imagecolorexact</function>も参考にしてください。
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.imagecolorexact">
   <refnamediv>
    <refname>ImageColorExact</refname>
    <refpurpose>指定した色のインデックスを取得する</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>int <function>imagecolorexact</function></funcdef>
     <paramdef>int <parameter>im</parameter></paramdef>
     <paramdef>int <parameter>red</parameter></paramdef>
     <paramdef>int <parameter>green</parameter></paramdef>
     <paramdef>int <parameter>blue</parameter></paramdef>
    </funcsynopsis>
    <para>
     画像パレット中の特定の色のインデックスを返します。
    </para>
    <para>
     画像パレット中に色が存在しない場合は、-1を返します。
    </para>
    <para>
     <function>imagecolorclosest</function> も参照下さい。
    </para>
    </refsect1>
   </refentry>

   <refentry id="function.imagecolorresolve">
    <refnamediv>
     <refname>ImageColorResolve</refname>
     <refpurpose>
      指定した色または出来るだけ近い色のインデックスを得る
     </refpurpose>
    </refnamediv>
    <refsect1>
     <title>説明</title>
     <funcsynopsis>
      <funcdef>int <function>imagecolorresolve</function></funcdef>
      <paramdef>int <parameter>im</parameter></paramdef>
      <paramdef>int <parameter>red</parameter></paramdef>
      <paramdef>int <parameter>green</parameter></paramdef>
      <paramdef>int <parameter>blue</parameter></paramdef>
     </funcsynopsis>
     <para>
     この関数は、指定した色に関するインデックスを常に返します。
     その色そのものまたは出来るだけ近い色へのインデックスが返されます。
    </para>
    <para>
     <function>imagecolorclosest</function>も参考にしてください。
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.imagecolorset">
   <refnamediv>
    <refname>ImageColorSet</refname>
    <refpurpose>指定したパレットインデックスの色を設定する</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>bool <function>imagecolorset</function></funcdef>
     <paramdef>int <parameter>im</parameter></paramdef>
     <paramdef>int <parameter>index</parameter></paramdef>
     <paramdef>int <parameter>red</parameter></paramdef>
     <paramdef>int <parameter>green</parameter></paramdef>
     <paramdef>int <parameter>blue</parameter></paramdef>
    </funcsynopsis>
    <para>
     この関数は、パレット上で指定したインデックス index を
     指定した色 color に設定します。
     実際にぬりつぶしを実行するオーバーヘッドなしに
     パレット上の色を使用する画像をぬりつぶしたような効果を得る
     ことができ、便利です。
    </para>
    <para>
     <function>imagecolorat</function>も参考にしてください。
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.imagecolorsforindex">
   <refnamediv>
    <refname>ImageColorsForIndex</refname>
    <refpurpose>カラーインデックスからカラーの取得</refpurpose>   
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>array <function>imagecolorsforindex</function></funcdef>
     <paramdef>int <parameter>im</parameter></paramdef>
     <paramdef>int <parameter>index</parameter></paramdef>
    </funcsynopsis>
    <para>
     指定したカラーインデックス index に対して適当な値からなる
     red、green、blue をキーとする連想配列を返します。
    </para>
    <para>
     <function>imagecolorat</function>および
     <function>imagecolorexact</function>も参考にしてください。
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.imagecolorstotal">
   <refnamediv>
    <refname>ImageColorsTotal</refname>
    <refpurpose>画像パレットの色数の検出</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>int <function>imagecolorstotal</function></funcdef>
     <paramdef>int <parameter>im</parameter></paramdef>
    </funcsynopsis>
    <para>
     指定した画像パレットの色数を返します。
    </para>
    <para>
     <function>imagecolorat</function>および
	 <function>imagecolorsforindex</function>も参考にしてください。
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.imagecolortransparent">
   <refnamediv>
    <refname>ImageColorTransparent</refname>
    <refpurpose>透明色の定義</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>int <function>imagecolortransparent</function></funcdef>
     <paramdef>int <parameter>im</parameter></paramdef>
     <paramdef>int 
      <parameter><optional>col</optional></parameter>
     </paramdef>
    </funcsynopsis>
    <para>
     <function>ImageColorTransparent</function>は、画像<parameter>im</parameter>
     上の透明色を<parameter>col</parameter>に設定します。
     <parameter>im</parameter>は<function>imagecreate</function>によって返された
     画像IDで、<parameter>col</parameter>は<function>imagecolorallocate</function>
     によって返された色IDです。
    </para>
    <para>
     新しい(指定されない場合は現在の)透明色の ID が返されます。
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.imagecopyresized">
   <refnamediv>
    <refname>ImageCopyResized</refname>
    <refpurpose>画像の一部の複製とサイズ変更</refpurpose>    
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>int <function>imagecopyresized</function></funcdef>
     <paramdef>int <parameter>dst_im</parameter></paramdef>
     <paramdef>int <parameter>src_im</parameter></paramdef>
     <paramdef>int <parameter>dstX</parameter></paramdef>
     <paramdef>int <parameter>dstY</parameter></paramdef>
     <paramdef>int <parameter>srcX</parameter></paramdef>
     <paramdef>int <parameter>srcY</parameter></paramdef>
     <paramdef>int <parameter>dstW</parameter></paramdef>
     <paramdef>int <parameter>dstH</parameter></paramdef>
     <paramdef>int <parameter>srcW</parameter></paramdef>
     <paramdef>int <parameter>srcH</parameter></paramdef>
    </funcsynopsis>
    <para>
     <function>ImageCopyResized</function>は指定した画像の矩形部分を別の画像
     へコピーします。<parameter>dst_im</parameter>はコピー先の画像ID、
     <parameter>src_im</parameter>はコピー元の画像IDです。
     コピー先とコピー元の座標、幅そして高さが異なれば、画像の一部が適当に
     伸縮されます。座標の原点は左上です。(仮に、
     <parameter>dst_im</parameter>と<parameter>src_im</parameter>が
     同一であれば)関数は領域のコピーに使うことができますが、
     領域が重なったときの結果は予測できません。
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.imagecreate">
   <refnamediv>
    <refname>ImageCreate</refname>
    <refpurpose>新規画像の作成</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>int <function>imagecreate</function></funcdef>
     <paramdef>int <parameter>x_size</parameter></paramdef>
     <paramdef>int <parameter>y_size</parameter></paramdef>
    </funcsynopsis>
    <para>
     <function>ImageCreate</function>は、<parameter>x_size</parameter>対
     <parameter>y_size</parameter>の空の画像を表わす画像IDを返します。
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.imagecreatefromgif">
   <refnamediv>
    <refname>ImageCreateFromGif</refname>
    <refpurpose>ファイルまたはURLから新規画像を作成</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>int <function>imagecreatefromgif</function></funcdef>
     <paramdef>string <parameter>filename</parameter></paramdef>
    </funcsynopsis>
    <para>
     <function>ImageCreateFromGif</function>は指定したfilename
     から得られた画像をあらわす画像IDを返します。
    </para>
    <para> 
     <function>imagecreatefromgif</function> は、エラー時に空の文字列を
     返します。また、エラーメッセージも出力しますが、不幸な事に
     ブラウザでは壊れたリンクとして表示されてしまいます。
     デバッグを簡単にするために次の例では、エラー表示用GIFを生成しています。
     <example>
      <title>
       作成時のエラーを処理する例 (vic@zymsys.com による)
      </title>
      <programlisting role="php">
 function LoadGif ($imgname)
 {
   $im = @imagecreatefromgif ($imgname); /* オープンを行う */
   if ($im == "") { /* 失敗したかどうかを調べる */
     $im = ImageCreate (150,30); /* 空の画像を作成 */
     $bgc = ImageColorAllocate ($im,255,255,255);
     $tc  = ImageColorAllocate ($im,0,0,0);
     ImageFilledRectangle ($im,0,0,150,30,$bgc);
     ImageString ($im,1,5,5,"Error loading $imgname",$tc); /* errmsg を出力 */
   }
   return $im;
 }
      </programlisting>
     </example>
     <note>
      <para>
       GD ライブラリバーjション1.6以降でGIFサポートが完全に削除されたので、
       該当する版のGDライブラリではこの関数を使用することはできません。
      </para>
     </note>
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.imagecreatefromjpg">
   <refnamediv>
    <refname>ImageCreateFromJPEG</refname>
    <refpurpose>ファイル又はURLから新規JPEG画像を作成する</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>int <function>imagecreatefromjpeg</function></funcdef>
     <paramdef>string <parameter>filename</parameter></paramdef>
    </funcsynopsis>
    <para>
     <function>ImageCreateFromJPEG</function>は引数filenameから得られる画像
     を表す画像IDを返します。
    </para>
    <para> 
     <function>imagecreatefromjpeg</function>はエラー時に空の文字列を
     返します。エラーメッセージも出力されますが、この場合、残念なことに
     ブラウザ上のリンクは壊れてしまいます。
     デバッグを簡単にするために以下の例ではエラー表示用JPEGを出力しています。
     <example>
      <title>
       作成時のエラーを処理する例 (vic@zymsys.comによる)
      </title>
      <programlisting role="php">
function LoadJpeg ($imgname)
{
  $im = @imagecreatefromjpeg ($imgname); /* オープンを試みる */
  if ($im == "") { /* オープンに失敗した場合 */
    $im = ImageCreate (150,30); /* 空の画像を作成 */
    $bgc = ImageColorAllocate ($im,255,255,255);
    $tc  = ImageColorAllocate ($im,0,0,0);
    ImageFilledRectangle ($im,0,0,150,30,$bgc);
    ImageString ($im,1,5,5,"Error loading $imgname",$tc); /* エラーメッセージを出力 */
  }
  return $im;
}
      </programlisting>
     </example>
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.imagecreatefrompng">
   <refnamediv>
    <refname>ImageCreateFromPNG</refname>
    <refpurpose>ファイルまたはURLから新規PNG画像を作成する</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>int <function>imagecreatefrompng</function></funcdef>
     <paramdef>string <parameter>filename</parameter></paramdef>
    </funcsynopsis>
    <para>
     <function>imagecreatefrompng</function>は引数filenameから得られる画像
     を表す画像IDを返します。
    </para>
    <para> 
     <function>ImageCreateFromPNG</function>はエラー時に空の文字列を
     返します。エラーメッセージも出力されますが、この場合、残念なことに
     ブラウザ上のリンクは壊れてしまいます。
     デバッグを簡単にするために以下の例ではエラー表示用<acronym>PNG</acronym>
     を出力しています。
    <example>
     <title>
      作成時のエラーを処理する例(vic@zymsys.comによる)
     </title>
     <programlisting role="php">
function LoadPNG ($imgname)
{
  $im = @imagecreatefrompng ($imgname); /* オープンを試みる */
  if ($im == "") { /* 失敗した場合 */
    $im = ImageCreate (150,30); /* 空の画像を作成 */
    $bgc = ImageColorAllocate ($im,255,255,255);
    $tc  = ImageColorAllocate ($im,0,0,0);
    ImageFilledRectangle ($im,0,0,150,30,$bgc);
    ImageString ($im,1,5,5,"Error loading $imgname",$tc); /* エラーメッセージを出力 */
  }
  return $im;
}
      </programlisting>
     </example>
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.imagedashedline">
   <refnamediv>
    <refname>ImageDashedLine</refname>
    <refpurpose>ダッシュライン(破線)の描画</refpurpose>    
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>int <function>imagedashedline</function></funcdef>
     <paramdef>int <parameter>im</parameter></paramdef>
     <paramdef>int <parameter>x1</parameter></paramdef>
     <paramdef>int <parameter>y1</parameter></paramdef>
     <paramdef>int <parameter>x2</parameter></paramdef>
     <paramdef>int <parameter>y2</parameter></paramdef>
     <paramdef>int <parameter>col</parameter></paramdef>
    </funcsynopsis>
    <para>    
     <function>ImageDashedLine</function>は、画像<parameter>im</parameter>に
     (<parameter>x1</parameter>, <parameter>y1</parameter>)から
     (<parameter>x2</parameter>, <parameter>y2</parameter>)まで(左上が0,0)
     <parameter>col</parameter>色で破線を描画します。
    </para>
    <para>
      <function>imageline</function>も参考にしてください。
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.imagedestroy">
   <refnamediv>
    <refname>ImageDestroy</refname>
    <refpurpose>画像の消去</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>int <function>imagedestroy</function></funcdef>
     <paramdef>int <parameter>im</parameter></paramdef>
    </funcsynopsis>
    <para>    
     <function>ImageDestroy</function>は画像<parameter>im</parameter>を保持する
     メモリを解放します。<parameter>im</parameter>は、
     <function>ImageCreate</function>関数が返す画像IDです。
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.imagefill">
   <refnamediv>
    <refname>ImageFill</refname>
    <refpurpose>塗り潰し</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>int <function>imagefill</function></funcdef>
     <paramdef>int <parameter>im</parameter></paramdef>
     <paramdef>int <parameter>x</parameter></paramdef>
     <paramdef>int <parameter>y</parameter></paramdef>
     <paramdef>int <parameter>col</parameter></paramdef>
    </funcsynopsis>
    <para> 
     <function>ImageFill</function>は、画像<parameter>im</parameter>において
     座標<parameter>x</parameter>, <parameter>y</parameter>(左上が0,0)から
     色<parameter>col</parameter>で領域を塗りつぶします。
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.imagefilledpolygon">
   <refnamediv>
    <refname>ImageFilledPolygon</refname>
    <refpurpose>塗りつぶした多角形の描画</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>int <function>imagefilledpolygon</function></funcdef>
     <paramdef>int <parameter>im</parameter></paramdef>
     <paramdef>array <parameter>points</parameter></paramdef>
     <paramdef>int <parameter>num_points</parameter></paramdef>
     <paramdef>int <parameter>col</parameter></paramdef>
    </funcsynopsis>
    <para>
     <function>ImageFilledPolygon</function>は画像<parameter>im</parameter>上に
     塗りつぶした多角形を生成します。
     <parameter>points</parameter>はPHPの配列で、多角形の頂点、すなわち、
     points[0] = x0, points[1] = y0, points[2] = x1,
     points[3] = y1などという具合になっています。
     <parameter>num_points</parameter>は頂点の総数です。
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.imagefilledrectangle">
   <refnamediv>
    <refname>ImageFilledRectangle</refname>
    <refpurpose>塗りつぶした矩形の描画</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>int <function>imagefilledrectangle</function></funcdef>
     <paramdef>int <parameter>im</parameter></paramdef>
     <paramdef>int <parameter>x1</parameter></paramdef>
     <paramdef>int <parameter>y1</parameter></paramdef>
     <paramdef>int <parameter>x2</parameter></paramdef>
     <paramdef>int <parameter>y2</parameter></paramdef>
     <paramdef>int <parameter>col</parameter></paramdef>
    </funcsynopsis>
    <para>
     <function>ImageFilledRectangle</function>は、画像<parameter>im</parameter>
     上に左上の座標を(<parameter>x1</parameter>, <parameter>y1</parameter>)、
     右下の座標を(<parameter>x2</parameter>, <parameter>y2</parameter>)とする矩形を
     描画します。左上隅が座標(0,0)となります。
     矩形は<function>col</function>色で塗りつぶされます。
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.imagefilltoborder">
   <refnamediv>
    <refname>ImageFillToBorder</refname>
    <refpurpose>特定色での塗りつぶし</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>int <function>imagefilltoborder</function></funcdef>
     <paramdef>int <parameter>im</parameter></paramdef>
     <paramdef>int <parameter>x</parameter></paramdef>
     <paramdef>int <parameter>y</parameter></paramdef>
     <paramdef>int <parameter>border</parameter></paramdef>
     <paramdef>int <parameter>col</parameter></paramdef>
    </funcsynopsis>
    <para>
     <function>ImageFillToBorder</function>は、<parameter>border</parameter>で指定した
     色を境界色として塗りつぶしを行います。
     (<parameter>x</parameter>,<parameter>y</parameter>)が塗りつぶしの始点(左上が0, 0)で、
     領域内を<parameter>col</parameter>色で塗りつぶします。
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.imagefontheight">
   <refnamediv>
    <refname>ImageFontHeight</refname>
    <refpurpose>フォントの高さの取得</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>int <function>imagefontheight</function></funcdef>
     <paramdef>int <parameter>font</parameter></paramdef>
    </funcsynopsis>
    <para>
     フォントfontの文字の高さをピクセル単位で返します。
    </para>
    <para>
     <function>imagefontwidth</function>および
     <function>imageloadfont</function>も参考にしてください。
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.imagefontwidth">
   <refnamediv>
    <refname>ImageFontWidth</refname>
    <refpurpose>フォントの幅の取得</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>int <function>imagefontwidth</function></funcdef>
     <paramdef>int <parameter>font</parameter></paramdef>
    </funcsynopsis>
    <para>
     フォントfontの文字の幅をピクセル単位で返します。
    </para>
    <para>
     <function>imagefontheight</function>および
     <function>imageloadfont</function>も参考にしてください。
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.imagegif">
   <refnamediv>
    <refname>ImageGif</refname>
    <refpurpose>ブラウザーもしくはファイルへの画像の出力</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>int <function>imagegif</function></funcdef>
     <paramdef>int <parameter>im</parameter></paramdef>
     <paramdef>string 
      <parameter><optional>filename</optional></parameter>
     </paramdef>
    </funcsynopsis>
    <para>
     <function>imagegif</function>は画像<parameter>im</parameter>
     から<acronym>GIF</acronym>ファイルfilenameを作成します。
     引数<parameter>im</parameter>は<function>imagecreate</function>関数
     から返されたものです。
    </para>
    <para>
     画像フォーマットは、<function>imagecolortransparent</function>を
     用いて画像を透明化しない限り<acronym>GIF87a</acronym>となります。
     透明化した場合の画像フォーマットは<acronym>GIF89a</acronym>となります。
    </para>
    <para>
     引数filenameはオプションで、省略した場合は、未加工の画像
     ストリームが直接出力されます。<function>header</function>関数を
     用いて content-type image/gif を送出すれば、直接<acronym>GIF</acronym>
     画像を出力するPHPスクリプトを作成することができます。
     <note>
      <para>
       <acronym>GD</acronym>ライブラリバージョン1.6以降で<acronym>GIF</acronym>
       サポートが完全に削除されたので、該当する版の<acronym>GD</acronym>ライブラリ
       ではこの関数を使用することはできません。
      </para>
     </note>
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.imagejpeg">
   <refnamediv>
    <refname>ImageJPEG</refname>
    <refpurpose>画像をブラウザまたはファイルに出力する</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>int <function>imagejpeg</function></funcdef>
     <paramdef>int <parameter>im</parameter></paramdef>
     <paramdef>string 
      <parameter><optional>filename</optional></parameter>
     </paramdef>
     <paramdef>int 
      <parameter><optional>quality</optional></parameter>
     </paramdef>
    </funcsynopsis>
    <para>
     <function>ImageJPEG</function>は画像<parameter>im</parameter>から
     <acronym>JPEG</acronym>ファイルfilenameを作成します。
     引数<parameter>im</parameter>は関数<function>imagecreate</function>
     の返り値です。
    </para>
    <para>
     引数filenameはオプションで、指定を省略した場合、画像は標準出力にそのまま
     出力されます。引数qualityを指定する際に引数filenameの指定を省略するには、
     単に空の文字列''を指定して下さい。
     <function>header</function>関数でimage/jpg content-typeを送信すること
     により、JPEG画像を直接出力するPHPスクリプトを作成することが可能です。
     <note>
      <para>
       JPEGサポートはPHPがGD-1.8以降を用いてコンパイルされた場合のみ
       利用可能です。
      </para>
     </note>
    </para>
   </refsect1>
  </refentry> 

  <refentry id="function.imageinterlace">
   <refnamediv>
    <refname>ImageInterlace</refname>
    <refpurpose>インターレースを有効もしくは無効にする</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>int <function>imageinterlace</function></funcdef>
     <paramdef>int <parameter>im</parameter></paramdef>
     <paramdef>int <parameter><optional>interlace</optional></parameter></paramdef>
    </funcsynopsis>
    <para>
      ImageInterlaceは、インターレースビットのオンオフを切り替えます。
      interlaceが1の場合に画像 im はインターレースとなり、0 であれば
      インターレースビットは消えます。
    </para>
    <para>
      この関数は、その画像のインタレースビットがセットされているかどうかを
      返します。
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.imageline">
   <refnamediv>
    <refname>ImageLine</refname>
    <refpurpose>直線の描画</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>int <function>imageline</function></funcdef>
     <paramdef>int <parameter>im</parameter></paramdef>
     <paramdef>int <parameter>x1</parameter></paramdef>
     <paramdef>int <parameter>y1</parameter></paramdef>
     <paramdef>int <parameter>x2</parameter></paramdef>
     <paramdef>int <parameter>y2</parameter></paramdef>
     <paramdef>int <parameter>col</parameter></paramdef>
    </funcsynopsis>
    <para>
     <function>ImageLine</function>は、画像<parameter>im</parameter>上に
     <parameter>col</parameter>色で
     (<parameter>x1</parameter>, <parameter>y1</parameter>)から
     (<parameter>x2</parameter>, <parameter>y2</parameter>)に
     直線を描画します。(左上が(0, 0)です。)
    </para>
    <para>
     <function>imagecreate</function>および
     <function>imagecolorallocate</function>も参考にしてください。
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.imageloadfont">
   <refnamediv>
    <refname>ImageLoadFont</refname>
    <refpurpose>新規フォントのロード</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>int <function>imageloadfont</function></funcdef>
     <paramdef>string <parameter>file</parameter></paramdef>
    </funcsynopsis>
    <para>
     <function>ImageLoadFont</function>はユーザが定義したビットマップフォントを
     ロードし、フォントID(通常は5より大きいので、組込みフォント
     とは競合しません)を返します。
    </para>
    <para>
     フォントファイル形式は現在はバイナリーで、アーキクチャに依存します。
     このため、PHPを実行するマシーンと同一の型のCPU上で
     フォントファイルを生成する必要があります。
    </para>
    <para>
     <table>
      <title>フォントファイルのフォーマット</title>
      <tgroup cols="3">
       <thead>
    <row>
     <entry>バイト位置</entry>
     <entry>C 言語のデータ型</entry>
     <entry>説明</entry>
    </row>
       </thead>
       <tbody>
    <row>
     <entry>0-3 バイト目</entry>
     <entry>int</entry>
     <entry>フォント中の文字の数</entry>
    </row>
    <row>
     <entry>4-7 バイト目</entry>
     <entry>int</entry>
     <entry>
       フォント中の最初の文字の値(しばしば 空白を表す 32 となります)
      </entry>
    </row>
    <row>
     <entry>8-11 バイト目</entry>
     <entry>int</entry>
     <entry>各文字のピクセル幅</entry>
    </row>
    <row>
     <entry>12-15 バイト目</entry>
     <entry>int</entry>
     <entry>各文字のピクセル高さ</entry>
    </row>
    <row>
     <entry>16 バイト目から</entry>
     <entry>char</entry>
     <entry>
       文字データの配列、各文字のピクセルにつき1バイトで、
       総数は(文字数*幅*高さ)バイトです。
      </entry>
    </row>

       </tbody>
      </tgroup>
     </table>
    </para>
    <para>
     <function>ImageFontWidth</function>および
     <function>ImageFontHeight</function>も参考にしてください。
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.imagepolygon">
   <refnamediv>
    <refname>ImagePolygon</refname>
    <refpurpose>多角形の描画</refpurpose>
  </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>int <function>imagepolygon</function></funcdef>
     <paramdef>int <parameter>im</parameter></paramdef>
     <paramdef>array <parameter>points</parameter></paramdef>
     <paramdef>int <parameter>num_points</parameter></paramdef>
     <paramdef>int <parameter>col</parameter></paramdef>
    </funcsynopsis>
    <para>
     <function>ImagePolygon</function>は、画像<parameter>im</parameter>上に
     多角形を生成します。
     <parameter>points</parameter>は多角形の頂点からなるPHPの配列で、
     points[0] = x0, points[1] = y0,
     points[2] = x1, points[3] = y1という風になっています。
     <parameter>num_oints</parameter>は頂点の総数です。
    </para>
    <para>
     <function>imagecreate</function>も参考にしてください。
    </para>
   </refsect1>
  </refentry>

   <refentry id="function.imagepsbbox">
    <refnamediv>
     <refname>ImagePSBBox</refname>
     <refpurpose>
      PostScript Type1 フォントを用いてテキスト矩形のバウンディングボックス
      を指定する
     </refpurpose>
    </refnamediv>
    <refsect1>
     <title>説明</title>
     <funcsynopsis>
      <funcdef>array <function>imagepsbbox</function></funcdef>
      <paramdef>string <parameter>text</parameter></paramdef>
      <paramdef>int <parameter>font</parameter></paramdef>
      <paramdef>int <parameter>size</parameter></paramdef>
      <paramdef>int <parameter>space</parameter></paramdef>
      <paramdef>int <parameter>width</parameter></paramdef>
      <paramdef>float <parameter>angle</parameter></paramdef>
     </funcsynopsis>
     <para>
      <parameter>size</parameter> はピクセル単位で表されます。
     </para>
     <para>
      <parameter>space</parameter> によりフォントが占める空間のデフォルト値を変更することが
      可能です。
      この値が元の値に付加されます。また、負の値とすることも可能です。
     </para>
     <para>
      <parameter>tightness</parameter> により文字間の空白の量を制御できます。
      この量は元の文字幅に追加され、負の値とすることも可能です。
     </para>
     <para>
      <parameter>angle</parameter> は度で表されます。
     </para>
     <para>
      パラメータ <parameter>space</parameter> および <parameter>tightness</parameter>
      は文字間隔の単位、つまり、1単位が文字矩形の 1/1000 で表されます。
     </para>
     <para>
      パラメータ <parameter>space</parameter>, <parameter>tightness</parameter>,
      <parameter>angle</parameter>  はオプションです。
     </para>
     <para>
      バウンディングボックスは文字メトリックスから得られる情報を用いて計算されますが、
      残念なことに実際に描画される文字列の描画結果とはわずかに異なる傾向があります。
      角度が0度の場合、全ての方向に1ピクセル分多く必要であると予想することができます。
     </para>
     <para>
      この関数は次の要素を有する配列を返します。
      <informaltable>
       <tgroup cols="2">
        <tbody>
 	<row>
 	 <entry>0</entry>
 	 <entry>左下の x 座標</entry>
 	</row>
 	<row>
 	 <entry>1</entry>
 	 <entry>左下の y 座標</entry>
 	</row>
 	<row>
 	 <entry>2</entry>
 	 <entry>右上の x 座標</entry>
 	</row>
 	<row>
 	 <entry>3</entry>
 	 <entry>右上の y 座標</entry>
 	</row>
        </tbody>
       </tgroup>
      </informaltable>
    </para>
    <para>
      <function>imagepstext</function>も参照下さい。
    </para>
   </refsect1>
  </refentry>


<!-- この関数が使用する t1lib の関数にはバグがあるようです。現在、
解決策が見つかるまでドキュメント及びソースではコメントアウト
しています。

  <refentry id="function.imagepscopyfont">
   <refnamediv>
    <refname>ImagePSCopyFont</refname>
    <refpurpose>
     後で修正するためにロード済みのフォントのコピーを作成する
    </refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>int <function>imagepscopyfont</function></funcdef>
     <paramdef>int <parameter>fontindex</parameter></paramdef>
    </funcsynopsis>
    <para>
    拡大・縮小、傾斜、文字エンコードベクトルの変更のようにフォントを
    後で修正する必要があるが、同時に元のフォントも保存しておく必要がある場合には、
    この関数を使用して下さい。
    コピーするフォントは、コピーされたフォントではなく、<function>imagepsloadfont</function> 
    を用いて得られたフォントである必要があることに注意してください。
    コピーする前に元のフォントの修正を行うことが可能です。
    </para>
    <para>
    この関数を使用する場合、この手法で得たフォントを逆順に解放する必要があります。
    さもないとスクリプトはハングする可能性があります。
    </para>
    <para>
    全てが正常に動作した場合、有効なフォントIDが返され、後で使用することが可能です。
    それ以外の場合はFALSEを返し、エラー個所を示すメッセージが出力されます。
    </para>
    <para>
     <function>imageploadpsfont</function> も参照下さい。
    </para>
   </refsect1>
  </refentry>
-->

  <refentry id="function.imagepsencodefont">
   <refnamediv>
    <refname>ImagePSEncodeFont</refname>
    <refpurpose>フォントの文字エンコードベクトルを変更する</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>int <function>imagepsencodefont</function></funcdef>
     <paramdef>string <parameter>encodingfile</parameter></paramdef>
    </funcsynopsis>
    
    <para>
    ファイルから文字エンコードベクトルをロードし、変更します。
    PostScript フォントのデフォルトベクトルは、127以上の位置には文字がほとんど
    ないので、英語以外の言語を使用する場合には恐らくこの部分を変更したいと
    思うことでしょう。
    このファイルの正しいフォーマットは、T1libs のドキュメントに記述されています。
    T1libs にはすぐに使用できるファイルとして IsoLatin1.enc および IsoLatin2.enc が
    含まれています。
    </para>
    <para>
    この関数を頻繁に用いている場合には、ずっと優れた方法として
     <link linkend="configuration.file">設定ファイル</link> で
    ps.default_encoding が正しいエンコードファイルを指すようにして
    エンコード法を定義する方法があります。
    この場合、自動的にロードされる全てのフォントは、正しいエンコードとなります。
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.imagepsfreefont">
   <refnamediv>
    <refname>ImagePSFreeFont</refname>
    <refpurpose>PostScript Type 1 フォント用メモリを解放する</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>void <function>imagepsfreefont</function></funcdef>
     <paramdef>int <parameter>fontindex</parameter></paramdef>
    </funcsynopsis>
    <para>
     <function>imagepsloadfont</function> も参照下さい。
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.imagepsloadfont">
   <refnamediv>
    <refname>ImagePSLoadFont</refname>
    <refpurpose>ファイルから PostScript Type 1 フォントをロードする</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>int <function>imagepsloadfont</function></funcdef>
     <paramdef>string <parameter>filename</parameter></paramdef>
    </funcsynopsis>
    <para>
    全て正常に処理された場合、有効なフォントIDが返され、後で使用することが
    できます。
    それ以外の場合、この関数はFALSEを返し、問題のある部分を示すメッセージを出力します。
    </para>
    <para>
     <function>imagepsfreefont</function> も参照下さい。
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.imagepstext">
   <refnamediv>
    <refname>ImagePSText</refname>
    <refpurpose>
     PostScript Type1 フォントを用いて画像の上に文字列を描く
    </refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>array <function>imagepstext</function></funcdef>
     <paramdef>int <parameter>image</parameter></paramdef>
     <paramdef>string <parameter>text</parameter></paramdef>
     <paramdef>int <parameter>font</parameter></paramdef>
     <paramdef>int <parameter>size</parameter></paramdef>
     <paramdef>int <parameter>foreground</parameter></paramdef>
     <paramdef>int <parameter>background</parameter></paramdef>
     <paramdef>int <parameter>x</parameter></paramdef>
     <paramdef>int <parameter>y</parameter></paramdef>
     <paramdef>int <parameter>space</parameter></paramdef>
     <paramdef>int <parameter>tightness</parameter></paramdef>
     <paramdef>float <parameter>angle</parameter></paramdef>
     <paramdef>int <parameter>antialias_steps</parameter></paramdef>
    </funcsynopsis>
    <para>
     <parameter>size</parameter> はピクセル単位で表されます。
    </para>
    <para>
     <parameter>foreground</parameter> は、テキストが描画される色です。
     <parameter>background</parameter> は、アンチエイリアス時にフェードアウトする
     色です。
     <parameter>background</parameter> 色のピクセルは描画されないので、
     背景画像が無地である必要はありません。</para>
    <para>
    <parameter>x</parameter>, <parameter>y</parameter> で指定される座標は、
    最初の文字の原点(または参照点)を定義します(おおよそ文字の左下隅)。
    これは、<function>ImageString</function> 関数で、
    x,y が最初の文字の右上隅を定義するのとは異なっています。
    動作に関して不明な場合は、フォント及びその測り方に関する PostScipt ドキュメントを
    参照下さい。
    </para>
    <para>
     <parameter>space</parameter> によりフォントが占める空間のデフォルト値を変更することが
     可能です。
     この値が元の値に付加されます。また、負の値とすることも可能です。
    </para>
    <para>
     <parameter>tightness</parameter> により文字間の空白の量を制御できます。
     この量は元の文字幅に追加され、負の値とすることも可能です。
    </para>
    <para>
     <parameter>angle</parameter> は度で表されます。
    </para>
    <para>
     <parameter>antialias_steps</parameter> によりアンチエイリアスを行うテキスト
     の色数を制御することが可能です。指定できるのは 4 および 16 です。 
     20 より小さな大きさのテキストには、見易くするために大きい方を推奨します。
     より大きなフォントでは、計算負荷がより少ない 4 を使用して下さい。
    </para>
    <para>
     パラメータ <parameter>space</parameter> および <parameter>tightness</parameter>
     は文字間隔の単位、つまり、1単位が文字矩形の 1/1000 で表されます。
    </para>
    <para>
     パラメータ <parameter>space</parameter>, <parameter>tightness</parameter>,
     <parameter>angle</parameter> ,<parameter>antialias</parameter> はオプションです。
    </para>
    <para>
    この関数は次の要素を有する配列を返します。
     <informaltable>
      <tgroup cols="2">
       <tbody>
	<row>
	 <entry>0</entry>
	 <entry>左下の x 座標</entry>
	</row>
	<row>
	 <entry>1</entry>
	 <entry>左下の y 座標</entry>
	</row>
	<row>
	 <entry>2</entry>
	 <entry>右上の x 座標</entry>
	</row>
	<row>
	 <entry>3</entry>
	 <entry>右上の y 座標</entry>
	</row>
       </tbody>
      </tgroup>
     </informaltable>
     </para>
     <para>
      <function>imagepsbbox</function>も参照下さい。
     </para>
    </refsect1>
   </refentry>
 
  <refentry id="function.imagerectangle">
   <refnamediv>
    <refname>ImageRectangle</refname>
    <refpurpose>矩形の描画</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>int <function>imagerectangle</function></funcdef>
     <paramdef>int <parameter>im</parameter></paramdef>
     <paramdef>int <parameter>x1</parameter></paramdef>
     <paramdef>int <parameter>y1</parameter></paramdef>
     <paramdef>int <parameter>x2</parameter></paramdef>
     <paramdef>int <parameter>y2</parameter></paramdef>
     <paramdef>int <parameter>col</parameter></paramdef>
    </funcsynopsis>
    <para>
     <function>ImageRectangle</function>は、画像<parameter>im</parameter>上に
     <parameter>col</parameter>色で左上を(<parameter>x1</parameter>,<parameter>y1</parameter>)、
     右下を(<parameter>x2</parameter>,<parameter>y2</parameter>)とする
     矩形を描画します。画像の左上角は(0,0)です。
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.imagesetpixel">
   <refnamediv>
    <refname>ImageSetPixel</refname>
    <refpurpose>点の生成</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>int <function>imagesetpixel</function></funcdef>
     <paramdef>int <parameter>im</parameter></paramdef>
     <paramdef>int <parameter>x</parameter></paramdef>
     <paramdef>int <parameter>y</parameter></paramdef>
     <paramdef>int <parameter>col</parameter></paramdef>
    </funcsynopsis>
    <para>
     <function>ImageSetPixel</function>は画像<parameter>im</parameter>上に
     <parameter>col</parameter>色で座標(<parameter>x</parameter>,<parameter>y</parameter>)
     (左上が0, 0)に点を描画します。
    </para>
    <para>  
     <function>imagecreate</function>および
     <function>imagecolorallocate</function>も参考にしてください。
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.imagestring">
   <refnamediv>
    <refname>ImageString</refname>
    <refpurpose>文字列を水平に描画する</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>int <function>imagestring</function></funcdef>
     <paramdef>int <parameter>im</parameter></paramdef>
     <paramdef>int <parameter>font</parameter></paramdef>
     <paramdef>int <parameter>x</parameter></paramdef>
     <paramdef>int <parameter>y</parameter></paramdef>
     <paramdef>string <parameter>s</parameter></paramdef>
     <paramdef>int <parameter>col</parameter></paramdef>
    </funcsynopsis>
    <para>
     <function>ImageString</function>は、画像<parameter>im</parameter>に
     <parameter>col</parameter>色で座標(<parameter>x</parameter>, <parameter>y</parameter>)
     (左上が0, 0)に文字列<parameter>s</parameter>を描画します。
     <parameter>font</parameter>が1, 2, 3, 4, 5 の場合、組込みフォントが使用されます。
    </para>
    <para>
     <function>imageloadfont</function>参考にしてください。
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.imagestringup">
   <refnamediv>
    <refname>ImageStringUp</refname>
    <refpurpose>文字列を垂直に描画する</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>int <function>imagestringup</function></funcdef>
     <paramdef>int <parameter>im</parameter></paramdef>
     <paramdef>int <parameter>font</parameter></paramdef>
     <paramdef>int <parameter>x</parameter></paramdef>
     <paramdef>int <parameter>y</parameter></paramdef>
     <paramdef>string <parameter>s</parameter></paramdef>
     <paramdef>int <parameter>col</parameter></paramdef>
    </funcsynopsis>
    <para>
     <function>ImageStringUp</function>は、画像<parameter>im</parameter>上に
     座標(<parameter>x</parameter>, <parameter>y</parameter>)から
     (左上が0, 0)、<parameter>col</parameter>色で垂直に文字列<parameter>s</parameter>
     を描画します。
     <parameter>font</parameter>が1, 2, 3, 4, 5の場合は組込みフォントが
     使用されます。
    </para>
    <para>
     <function>imageloadfont</function>も参考にしてください。
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.imagesx">
   <refnamediv>
    <refname>ImageSX</refname>
    <refpurpose>画像の幅を取得</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>int <function>imagesx</function></funcdef>
     <paramdef>int <parameter>im</parameter></paramdef>
    </funcsynopsis>
    <para>
     <function>ImageSX</function>は<parameter>im</parameter>をIDとする画像の幅を返します。
    </para>
    <para>
     <function>imagecreate</function>および
     <function>imagesy</function>も参考にしてください。
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.imagesy">
   <refnamediv>
    <refname>ImageSY</refname>
    <refpurpose>画像の高さを取得する</refpurpose>    
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>int <function>imagesy</function></funcdef>
     <paramdef>int <parameter>im</parameter></paramdef>
    </funcsynopsis>
    <para>
     <function>ImageSY</function>は<parameter>im</parameter>で識別される
     画像の高さを返します。
    </para>
    <para>
     <function>imagecreate</function>および
     <function>imagesx</function>も参考にしてください。
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.imagettfbbox">
   <refnamediv>
    <refname>ImageTTFBBox</refname>
    <refpurpose>
     TypeTypeフォントを使用したテキストのbounding boxの生成
    </refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>array <function>ImageTTFBBox</function></funcdef>
     <paramdef>int <parameter>size</parameter></paramdef>
     <paramdef>int <parameter>angle</parameter></paramdef>
     <paramdef>string <parameter>fontfile</parameter></paramdef>
     <paramdef>string <parameter>text</parameter></paramdef>
    </funcsynopsis>
    <para>
     本関数はTrueTypeテキストのピクセル単位でのbounding boxを
     計算し返します。
     <variablelist>
      <varlistentry>
       <term><parameter>text</parameter></term>
       <listitem><simpara>測定する文字列。</simpara></listitem>
      </varlistentry>
      <varlistentry>
       <term><parameter>size</parameter></term>
       <listitem><simpara>フォントの大きさ。</simpara></listitem>
      </varlistentry>
      <varlistentry>
       <term><parameter>fontfile</parameter></term>
       <listitem><simpara>TrueTypeフォントファイルの名称。  (URLも可。)</simpara></listitem>
      </varlistentry>
      <varlistentry>
       <term><parameter>angle</parameter></term>
       <listitem><simpara>測定する<parameter>text</parameter>の
         角度(度単位)。</simpara></listitem>
      </varlistentry>
     </variablelist>
     <function>ImageTTFBBox</function>は、テキストのbounding boxを
     作成するための4点を表現する8個の要素からなる配列を返します。
     <informaltable>
      <tgroup cols="2">
       <tbody>
	<row>
	 <entry>0</entry>
	 <entry>左下角のX座標</entry>
	</row>
	<row>
	 <entry>1</entry>
	 <entry>左下角のY座標</entry>
	</row>
	<row>
	 <entry>2</entry>
	 <entry>右下角のX座標</entry>
	</row>
	<row>
	 <entry>3</entry>
	 <entry>右下角のY座標</entry>
	</row>
	<row>
	 <entry>4</entry>
	 <entry>右上角のX座標</entry>
	</row>
	<row>
	 <entry>5</entry>
	 <entry>右上角のY座標</entry>
	</row>
	<row>
	 <entry>6</entry>
	 <entry>左上角のX座標</entry>
	</row>
	<row>
	 <entry>7</entry>
	 <entry>左上角のY座標</entry>
	</row>
       </tbody>
      </tgroup>
     </informaltable>
     4点の座標は、角度によらず<emphasis>text</emphasis>に関する
     相対位置で表わされます。
     つまり、"左上"はテキストを水平に見た場合の左上の角を意味します。
    </para>
    <para>
     本関数はGDライブラリとFreetypeライブラリの両方が必要です。
    </para>
    <para>
     <function>ImageTTFText</function>も参考にしてください。
    </para>
   </refsect1>
  </refentry>

  <refentry id="function.imagettftext">
   <refnamediv>
    <refname>ImageTTFText</refname>
    <refpurpose>TrueTypeフォントを使用したテキストの出力</refpurpose>
   </refnamediv>
   <refsect1>
    <title>説明</title>
    <funcsynopsis>
     <funcdef>array <function>ImageTTFText</function></funcdef>
     <paramdef>int <parameter>im</parameter></paramdef>
     <paramdef>int <parameter>size</parameter></paramdef>
     <paramdef>int <parameter>angle</parameter></paramdef>
     <paramdef>int <parameter>x</parameter></paramdef>
     <paramdef>int <parameter>y</parameter></paramdef>
     <paramdef>int <parameter>col</parameter></paramdef>
     <paramdef>string <parameter>fontfile</parameter></paramdef>
     <paramdef>string <parameter>text</parameter></paramdef>
    </funcsynopsis>
    <para>
     ImageTTFTextは画像 <parameter>im</parameter>上に
     座標(<parameter>x,y</parameter>)(左上が(0, 0))から
     角度<parameter>angle</parameter>、色
     <parameter>col</parameter>で文字列<parameter>text</parameter>を
     描画します。TrueTypeフォントを<parameter>fontfile</parameter>で
     指定します。
    </para>
    <para>
     (<parameter>x</parameter>,<parameter>y</parameter>)で指定する
     座標は、最初の文字のベースポイント(ほぼ文字の左下角)を定義します。
     この仕様は、(x,y)が最初の文字の右上角を定義する
     <function>ImageString</function> と異なっています。
    </para>
    <para>
     <parameter>angle</parameter>の単位は角度で、0度は左から
     右にテキストを読む方向(3時の方向)になります。
     0より大きな値は、反時計廻りの回転を表現します。
     (即ち、90という値は下から上にテキストを読む方向になります。)
    </para>
    <para>
     <parameter>fontfile</parameter>は、使用する TrueType
     フォントのパスです。
    </para>
    <para>
     <parameter>text</parameter> はテキスト文字列であり、
     フォントの 255 番目までの文字をアクセスするために 
     (&amp;#123; という形式の) UTF-8 文字列を使うことができます。
    </para>
    <para>
     <parameter>col</parameter> はカラーインデックスです。
     カラーインデックスに負の数を使用した場合、アンチエイリアス機能が
     オフになります。
    </para>
    <para>
     <function>ImageTTFText</function>は、text のbounding boxを
     構成する4点を表す8個の要素を有する配列を返します。
     返される点は左上、右上、右下、左下の順番となります。
     点の座標は、角度によらず text に関する相対座標として表されます。
     つまり、"左上"は、text を水平に見た場合の左上の隅を表します。
    </para>
    <para>
     以下の例題スクリプトは、400x30ピクセルの黒地に Arialフォントを
     用いて、白字で"Testing..."と書かれたGIFを作成します。
     <example>
      <title>ImageTTFText</title>
      <programlisting>
&lt;?php
Header("Content-type: image/gif");
$im = imagecreate(400,30);
$black = ImageColorAllocate($im, 0,0,0);
$white = ImageColorAllocate($im, 255,255,255);
ImageTTFText($im, 20, 0, 10, 20, $white, "/path/arial.ttf", "Testing... Omega: &amp;#937;");
ImageGif($im);
ImageDestroy($im);
?&gt;
      </programlisting>
     </example>
    </para>
    <para>
     この関数はGDライブラリと<ulink url="&url.freetype;">FreeType</ulink>
     ライブラリの両方が必要です。
    </para>
    <para>
     <function>ImageTTFBBox</function>も参照下さい。
    </para>
   </refsect1>
  </refentry>

 
 </reference>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:1
sgml-indent-data:t
sgml-parent-document:nil
sgml-default-dtd-file:"../manual.ced"
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
-->

